<!DOCTYPE html>
<html lang="ta">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üé¨ Movies Aro - Dubbed Tamil Movies</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #111;
      color: #fff;
      margin: 0;
      padding: 0;
    }
    .site-header {
      background-color: #222;
      text-align: center;
      padding: 10px;
    }
    .category-item, .movie-item {
      margin: 10px;
      padding: 10px;
      background: #1e1e1e;
      border-radius: 6px;
    }
    .movie-item img {
      width: 100px;
      float: left;
      margin-right: 10px;
    }
    .movie-info {
      overflow: hidden;
    }
    .spinner-container {
      text-align: center;
      padding: 20px;
    }
    .spinner {
      border: 4px solid #444;
      border-top: 4px solid #fff;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
      margin: 10px auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg);}
      100% { transform: rotate(360deg);}
    }
    .pagination {
      text-align: center;
      margin: 20px 0;
    }
    .pagination a, .pagination span {
      color: lime;
      margin: 0 5px;
      text-decoration: none;
    }
    .error {
      color: red;
      text-align: center;
      padding: 20px;
    }
    #popup {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      display: none;
      justify-content: center;
      align-items: center;
    }
    .popup-content {
      background: #222;
      padding: 20px;
      text-align: center;
      border-radius: 8px;
    }
  </style>
</head>
<body>

  <div class="site-header">
    <h1>üé¨ Cine Cutz</h1>
    <p> *Name Of Brand* </p>
  </div>
<center>
  <button onclick="goBack()">‚Üê Back</button>
</center>
  <div id="content"></div>
  <div id="popup">
    <div class="popup-content">
      <p>Click confirm to continue to download.</p>
      <button onclick="confirmRedirect()">Confirm</button>
    </div>
  </div>

  <script>
    const container = document.getElementById("content");
    const popup = document.getElementById("popup");
    let finalDownloadURL = '';
    const pageHistory = [];

    function loadPage(url, retryCount = 0) {
      pageHistory.push(url);
      container.innerHTML = `
        <div class="spinner-container">
          <div class="spinner"></div>
          <p class="loading-text">Loading...</p>
        </div>
      `;

      fetch(`https://corsproxy.io/?https://isaidub.cityhttps://isaidub.tube/tamil-yearly-dubbed-movies/
${url}`)
        .then((res) => res.text())
        .then((html) => {
          const doc = new DOMParser().parseFromString(html, "text/html");

          const listItems = doc.querySelectorAll(".category-item, .movie-item");
          const downloadLinks = doc.querySelectorAll(".download a");
          const paginationLinks = doc.querySelectorAll(".wp-pagenavi a, .wp-pagenavi span");

          let contentHTML = "";
          let downloadHTML = "";
          let paginationHTML = "";

          if (listItems.length) {
            listItems.forEach(item => {
              const anchor = item.querySelector("a");
              const img = item.querySelector("img");
              const size = item.textContent.match(/\[\d+MB|\d+GB\]/gi);

              contentHTML += `
                <div class="movie-item">
                  ${img ? `<img src="https://isaidub.city${img.getAttribute("src")}" alt="${img.getAttribute("alt")}" />` : ''}
                  <div class="movie-info">
                    <a href="#" onclick="loadPage('${anchor.getAttribute("href")}'); return false;">
                      ${anchor.textContent.replace(/isaiDub\.me/gi, "MoviesAroDub")}
                    </a><br>
                    ${size ? `<small>${size}</small>` : ''}
                  </div>
                </div>
              `;
            });
          }

          if (downloadLinks.length) {
            downloadHTML += `<div class="category-item"><strong>Download Links</strong><br><br>`;
            downloadLinks.forEach(a => {
              const href = a.getAttribute("href");
              if (href) {
                downloadHTML += `
                  <div>
                    <a href="#" onclick="handleFinalDownload('${href}'); return false;" style="color:lime">
                      ${a.textContent.replace(/isaiDub\.me/gi, "cine cutz")}
                    </a>
                  </div>
                `;
              }
            });
            downloadHTML += `</div>`;
          }

          if (paginationLinks.length) {
            paginationHTML += `<div class="pagination">Pages: `;
            paginationLinks.forEach(item => {
              if (item.tagName === "SPAN") {
                paginationHTML += `<span class="pagination_current">${item.textContent}</span>`;
              } else {
                const href = item.getAttribute("href");
                paginationHTML += `<a href="#" onclick="loadPage('${href}'); return false;">${item.textContent}</a>`;
              }
            });
            paginationHTML += `</div>`;
          }

          container.innerHTML = contentHTML + downloadHTML + paginationHTML;
        })
        .catch((err) => {
          console.error(err);
          if (retryCount < 3) {
            setTimeout(() => loadPage(url, retryCount + 1), 2000);
          } else {
            container.innerHTML = `<p class="error">Failed to load content after ${retryCount} attempts.</p>`;
          }
        });
    }

    function goBack() {
      pageHistory.pop();
      const previousPage = pageHistory.pop();
      if (previousPage) {
        loadPage(previousPage);
      }
    }

    function handleFinalDownload(url) {
      finalDownloadURL = url;
      popup.style.display = "flex";
      setTimeout(() => {
        window.open("https://go.otretrithe.com/afu.php?zoneid=5973488", "_blank");
      }, 1000);
    }

    function confirmRedirect() {
      popup.style.display = "none";
      setTimeout(() => {
        window.location.href = finalDownloadURL;
      }, 5000);
    }
    // ORIGINAL
    loadPage("https://isaidub.tube/tamil-yearly-dubbed-movies/");

    // ‚úÖ FIXED
    loadPage("/tamil-yearly-dubbed-movies/");


  
  </script>

</body>
</html>